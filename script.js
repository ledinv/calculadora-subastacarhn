const firebaseConfig={'apiKey':'AIzaSyA5BuOwgEUYK1JMwJD0PL0k0rcAST_Koms','authDomain':'subastacarhn-40554.firebaseapp.com','projectId':'subastacarhn-40554','storageBucket':'subastacarhn-40554.appspot.com','messagingSenderId':'536785797974','appId':'1:536785797974:web=e3eabb4dcd898c2ffe8cf7','measurementId':'G-QM5N60K8C0'};firebase['initializeApp'](firebaseConfig);const auth=firebase['auth'](),db=firebase['firestore']();function toggleMenu(){const _0x38bd48=document['getElementById']('mobile-menu-links');_0x38bd48['style']['display']=_0x38bd48['style']['display']==='flex'?'none':'flex';}function bloquearMotorPorVin(){const _0x20f408=document['getElementById']('c13')['value'],_0x28adb1=document['getElementById']('motor');_0x28adb1['disabled']=_0x20f408!=='OTROS';if(_0x28adb1['disabled'])_0x28adb1['value']='';}const formatear=_0x1887de=>new Intl['NumberFormat']('es-HN',{'style':'currency','currency':'HNL'})['format'](_0x1887de),formatearUSD=_0x340239=>new Intl['NumberFormat']('en-US',{'style':'currency','currency':'USD'})['format'](_0x340239);async function obtenerTipoCambioAutomatico(){const _0x2751eb='https://subastacar-bch-api.onrender.com/api/tipo-cambio-bch';try{const _0x190345=await fetch(_0x2751eb),_0x5aa4af=await _0x190345['json']();_0x5aa4af['valor']&&(document['getElementById']('e2')['value']=_0x5aa4af['valor'],document['getElementById']('e2')['readOnly']=!![]);}catch(_0x31e6c2){console['error']('Error\x20al\x20conectar\x20con\x20el\x20backend:',_0x31e6c2);}}const buyerFees=[[0x32,0x1],[0x64,0x19],[0xc8,0x3c],[0x12c,0x55],[0x15e,0x64],[0x190,0x7d],[0x1c2,0x87],[0x1f4,0x91],[0x226,0x9b],[0x258,0xaa],[0x2bc,0xc3],[0x320,0xd7],[0x384,0xe6],[0x3e8,0xfa],[0x4b0,0x10e],[0x514,0x11d],[0x578,0x12c],[0x5dc,0x13b],[0x640,0x14a],[0x6a4,0x15e],[0x708,0x172],[0x7d0,0x186],[0x960,0x1a9],[0x9c4,0x1cc],[0xbb8,0x1f9],[0xdac,0x22b],[0xfa0,0x258],[0x1194,0x271],[0x1388,0x28a],[0x157c,0x2a3],[0x1770,0x2bc],[0x1b58,0x2f3],[0x1d4c,0x307],[0x1f40,0x320],[0x2134,0x334],[0x2328,0x334],[0x2710,0x352],[0x2af8,0x352],[0x2cec,0x35c],[0x2ee0,0x36b],[0x30d4,0x37a],[0x32c8,0x37a],[0x36b0,0x384],[0x3a98,0x384]],virtualBidFees=[[0x64,0x32],[0x1f4,0x41],[0x3e8,0x55],[0x5dc,0x5f],[0x7d0,0x6e],[0xfa0,0x7d],[0x1770,0x91],[0x1f40,0xa0],[0x2328,0xa0],[0x2710,0xa0],[0x30d40,0xa0]],buscarValor=(_0x5ca27c,_0x5b91d6)=>{for(let _0x331e78=_0x5ca27c['length']-0x1;_0x331e78>=0x0;_0x331e78--){if(_0x5b91d6>=_0x5ca27c[_0x331e78][0x0])return _0x5ca27c[_0x331e78][0x1];}return 0x0;},buscarBuyerFee=_0x301ba9=>_0x301ba9>0x3a98?+(_0x301ba9*0.06)['toFixed'](0x2):buscarValor(buyerFees,_0x301ba9),buscarVirtualBidFee=_0x5e44d2=>_0x5e44d2>0x1f40?0xa0:buscarValor(virtualBidFees,_0x5e44d2);function calcular(){registrarClic();const _0x5657bf=parseFloat(document['getElementById']('c1')['value']['trim']()),_0x1477d2=parseFloat(document['getElementById']('c7')['value']['trim']()),_0x135469=parseFloat(document['getElementById']('c8')['value']['trim']()),_0xfc3270=parseFloat(document['getElementById']('e2')['value']['trim']()),_0x5e5bd5=document['getElementById']('c13')['value'],_0x910f4d=document['getElementById']('c14')['value'],_0x350378=document['getElementById']('motor')['value'];if(!_0x5657bf||!_0x1477d2||!_0x135469||!_0xfc3270||!_0x5e5bd5||!_0x910f4d||_0x5e5bd5==='OTROS'&&!_0x350378){alert('Por\x20favor\x20completa\x20todos\x20los\x20campos.\x20El\x20campo\x20\x27Tipo\x20de\x20Motor\x27\x20solo\x20aplica\x20si\x20el\x20VIN\x20es\x20OTROS.');return;}const _0xad6083=0xf,_0x498aec=buscarVirtualBidFee(_0x5657bf),_0x29ebc2=buscarBuyerFee(_0x5657bf),_0x179d06=0x73,_0x5c0c7f=_0x5657bf+_0xad6083+_0x498aec+_0x29ebc2+_0x179d06,_0x119c00=_0x1477d2+_0x135469,_0x501d98=_0x5c0c7f+_0x119c00,_0x53787a=_0x501d98*_0xfc3270,_0x26d7a3=0x32,_0x3f4002=_0x5c0c7f*0.015,_0x5a5c5d=_0x26d7a3*_0xfc3270,_0x428dc6=_0x3f4002*_0xfc3270,_0x13326a=_0x5e5bd5==='1,4,5';let _0x23421a=0x0;if(!_0x13326a){const _0x35c3c0=_0x53787a+_0x5a5c5d+_0x428dc6;if(_0x910f4d==='MAQUINARIA')_0x23421a=_0x35c3c0*0.05;else{if(_0x910f4d==='HIBRIDO')_0x23421a=_0x35c3c0*0.1;else{if(['PICK\x20UP','CAMION','BUS','MOTO']['includes'](_0x910f4d))_0x23421a=_0x35c3c0*0.1;else _0x350378==='1.5\x20Inferior'?_0x23421a=_0x35c3c0*0.05:_0x23421a=_0x35c3c0*0.15;}}}let _0x490c82=0x0;if(_0x910f4d==='PICK\x20UP')_0x490c82=0x0;else{if(_0x910f4d==='MOTO')_0x490c82=(_0x53787a+_0x5a5c5d+_0x428dc6+_0x23421a)*0.1;else{if(_0x910f4d==='HIBRIDO')_0x490c82=(_0x53787a+_0x5a5c5d+_0x428dc6+_0x23421a)*0.05;else{if(['CAMION','BUS','MAQUINARIA']['includes'](_0x910f4d))_0x490c82=0x0;else{const _0x1d57b3=_0x501d98+_0x26d7a3+_0x3f4002;let _0x1b123a=0x0;if(_0x1d57b3<=0x1b58)_0x1b123a=0.1;else{if(_0x1d57b3<=0x2710)_0x1b123a=0.15;else{if(_0x1d57b3<=0x4e20)_0x1b123a=0.2;else{if(_0x1d57b3<=0xc350)_0x1b123a=0.3;else _0x1b123a=0.45;}}}_0x490c82=(_0x53787a+_0x5a5c5d+_0x428dc6+_0x23421a)*_0x1b123a;}}}}let _0x2c4649=0x0;_0x910f4d!=='MAQUINARIA'&&(_0x2c4649=(_0x53787a+_0x23421a+_0x490c82+_0x5a5c5d+_0x428dc6)*0.15);const _0x23621b=_0x23421a+_0x490c82+_0x2c4649;let _0x1ecf1a=0x1388;if(_0x501d98>0x3a98&&_0x501d98<=0x61a8)_0x1ecf1a=0x1b58;else{if(_0x501d98>0x61a8)_0x1ecf1a=0x2710;}if(_0x910f4d==='MAQUINARIA')_0x1ecf1a=0x0;const _0x1d3797=0xfa0,_0x560614=0x1d4c,_0x259c6c=0xfa0,_0xbf65d3=0x37*_0xfc3270,_0x1b497c=_0x1ecf1a+_0x1d3797+_0x560614+_0x259c6c+_0xbf65d3,_0x33e335=_0x53787a+_0x23621b+_0x1b497c;window['_cotizacionDetalles']=[['MONTO\x20DE\x20OFERTA',_0x5657bf,'usd'],['ENVIRONMENTAL\x20FEE',_0xad6083,'usd'],['VIRTUAL\x20BID\x20FEE',_0x498aec,'usd'],['BUYER\x20FEE',_0x29ebc2,'usd'],['GATE\x20Y\x20TITLE\x20PICK\x20FEE',_0x179d06,'usd'],['TOTAL\x20PRECIO\x20SUBASTA',_0x5c0c7f,'usd'],['VALOR\x20DE\x20BARCO',_0x1477d2,'usd'],['PRECIO\x20DE\x20GRÚA',_0x135469,'usd'],['TOTAL\x20DE\x20ENVÍO\x20MARÍTIMO',_0x119c00,'usd'],['TOTAL\x20CIF\x20EN\x20DÓLARES',_0x501d98,'usd'],['TOTAL\x20CIF\x20EN\x20LEMPIRAS',_0x53787a,'hnl'],['DAI',_0x23421a,'hnl'],['ISC',_0x490c82,'hnl'],['ISV',_0x2c4649,'hnl'],['TOTAL\x20DE\x20IMPUESTOS\x20HONDURAS',_0x23621b,'hnl'],['ECOTASA',_0x1ecf1a,'hnl'],['ADUANERO',_0x1d3797,'hnl'],['VOTAINER\x20-\x20CONSOLIDADOS\x20HN',_0x560614,'hnl'],['MATRÍCULA\x20Y\x20PLACAS',_0x259c6c,'hnl'],['TRANSFERENCIA\x20INTERNACIONAL',_0xbf65d3,'hnl'],['TOTAL\x20DE\x20GASTOS\x20FIJOS',_0x1b497c,'hnl'],['TOTAL\x20FINAL',_0x33e335,'hnl']],window['_cotizacionTotal']=_0x33e335;const _0x4a55bd=window['_cotizacionDetalles']['map'](([_0x120950,_0x4fa3d4,_0x2ff53e])=>({'titulo':_0x120950,'valor':_0x2ff53e==='usd'?formatearUSD(_0x4fa3d4):formatear(_0x4fa3d4)}));guardarHistorial(_0x4a55bd,formatear(window['_cotizacionTotal'])),mostrarDetalles();}function toggleDetalles(){const _0x5204ed=document['getElementById']('detalleResultados'),_0xc20503=document['getElementById']('toggleBtn');_0x5204ed['style']['display']==='none'?(_0x5204ed['style']['display']='block',_0xc20503['textContent']='Ocultar\x20detalles'):(_0x5204ed['style']['display']='none',_0xc20503['textContent']='Ver\x20detalles');}function mostrarDetalles(){const _0x56d9bc=window['_cotizacionDetalles']['map'](([_0x4de4ed,_0xbafca7,_0x509941])=>'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x4de4ed+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+(_0x509941==='usd'?formatearUSD(_0xbafca7):formatear(_0xbafca7))+'</td>\x0a\x20\x20\x20\x20</tr>')['join'](''),_0x461372='\x0a\x20\x20\x20\x20<div\x20class=\x22cotizacion-container\x22>\x0a\x20\x20\x20\x20\x20\x20<header\x20class=\x22cotizacion-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22logo.png\x22\x20alt=\x22SubastaCarHN\x22\x20class=\x22logo\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empresa-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>COTIZACIÓN</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>SubastaCarHN</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Tel:\x20+504\x2097330137\x20|\x20info@subastacarhn.com</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>www.comocomprarcarros.com</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</header>\x0a\x20\x20\x20\x20\x20\x20<hr\x20/>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22total-final\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>Total\x20Final:</strong>\x20'+formatear(window['_cotizacionTotal'])+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22botones-detalle\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22toggleBtn\x22\x20class=\x22styled-btn\x22\x20onclick=\x22toggleDetalles()\x22>Ver\x20detalles</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22descargarPDF()\x22\x20class=\x22styled-btn\x22>Descargar\x20Cotización</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22compartirWhatsApp()\x22\x20class=\x22styled-btn\x22>Compartir\x20por\x20WhatsApp</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22detalleResultados\x22\x20style=\x22display:\x20none;\x20margin-top:\x201rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22tabla-cotizacion\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr><th>Concepto</th><th>Valor</th></tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x56d9bc+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<footer\x20class=\x22disclaimer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>Esta\x20cotización\x20es\x20solo\x20un\x20estimado\x20y\x20no\x20constituye\x20un\x20compromiso\x20de\x20SubastaCarHN.\x20SubastaCarHN\x20se\x20libera\x20de\x20toda\x20responsabilidad\x20por\x20el\x20uso\x20de\x20estos\x20datos.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</footer>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>';document['getElementById']('results')['innerHTML']=_0x461372;}function descargarPDF(){const _0x9bda71=document['getElementById']('detalleResultados');_0x9bda71['style']['display']==='none'&&(_0x9bda71['style']['display']='block',document['getElementById']('toggleBtn')['textContent']='Ocultar\x20detalles');const _0x52fd54=document['getElementById']('results')['innerHTML'],_0x3ffa27=window['open']('','_blank','width=900,height=700');_0x3ffa27['document']['open'](),_0x3ffa27['document']['write']('\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<title>Cotización\x20SubastaCarHN</title>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<link\x20rel=\x22stylesheet\x22\x20href=\x22style.css\x22>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x52fd54+'\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>'),_0x3ffa27['document']['close'](),setTimeout(()=>_0x3ffa27['print'](),0x1f4);}function compartirWhatsApp(){let _0x31cb3e='¡Hola!\x20Aquí\x20tienes\x20la\x20cotización\x20de\x20tu\x20vehículo:\x0a\x0a';window['_cotizacionDetalles']['forEach'](([_0x1a71f1,_0x192e0f,_0x3575d3])=>{_0x31cb3e+=_0x1a71f1+':\x20'+(_0x3575d3==='usd'?formatearUSD(_0x192e0f):formatear(_0x192e0f))+'\x0a';}),_0x31cb3e+='\x0aTotal\x20Final:\x20'+formatear(window['_cotizacionTotal'])+'\x0a\x0aCalculado\x20con\x20SUBASTACARHN\x20👉\x20https://comocomprarcarros.com';const _0x4495db='https://wa.me/?text='+encodeURIComponent(_0x31cb3e);window['open'](_0x4495db,'_blank');}async function guardarHistorial(_0x77b8d,_0x347565){const _0x53f21a=auth['currentUser'];if(!_0x53f21a)return;try{const _0x4cd20d=db['collection']('clients')['doc'](_0x53f21a['uid'])['collection']('historial'),_0x30223d=await _0x4cd20d['orderBy']('fecha','desc')['get']();if(_0x30223d['size']>=0x64){const _0x1e9c06=_0x30223d['docs'][_0x30223d['size']-0x1];await _0x4cd20d['doc'](_0x1e9c06['id'])['delete']();}await _0x4cd20d['add']({'nombre':'Sin\x20título','fecha':firebase['firestore']['FieldValue']['serverTimestamp'](),'detalles':_0x77b8d,'total':_0x347565});}catch(_0x4a8301){console['error']('❌\x20Error\x20al\x20guardar\x20historial:',_0x4a8301);}}const endpoint='https://contador-clics-backend.onrender.com/contador';async function obtenerContador(){try{const _0x3e6494=await fetch(endpoint),_0x4fe004=await _0x3e6494['json'](),_0xc9cbb1=document['getElementById']('contadorClics');if(_0xc9cbb1)_0xc9cbb1['textContent']='Cálculos:\x20'+_0x4fe004['clics'];}catch(_0x296222){console['error']('Error\x20al\x20obtener\x20el\x20contador:',_0x296222);}}async function registrarClic(){try{const _0x53685d=await fetch(endpoint,{'method':'POST'}),_0x274fdf=await _0x53685d['json'](),_0x43185d=document['getElementById']('contadorClics');if(_0x43185d)_0x43185d['textContent']='Cálculos:\x20'+_0x274fdf['clics'];}catch(_0x2f596c){console['error']('Error\x20al\x20registrar\x20clic:',_0x2f596c);}}function reiniciar(){document['getElementById']('c1')['value']='',document['getElementById']('c7')['value']='',document['getElementById']('c8')['value']='',document['getElementById']('e2')['value']='25.90',document['getElementById']('c13')['value']='OTROS',document['getElementById']('c14')['value']='OTROS',document['getElementById']('motor')['value']='',document['getElementById']('results')['innerHTML']='',bloquearMotorPorVin();}function logout(){firebase['auth']()['signOut']()['then'](()=>location['reload']());}firebase['auth']()['onAuthStateChanged'](_0x168402=>{const _0x310f61=document['getElementById']('userGreeting'),_0x4e38a5=document['getElementById']('mobileGreeting');if(_0x168402){const _0x3386dd=(_0x168402['displayName']||_0x168402['email']['split']('@')[0x0])['replace'](/^./,_0x2d6244=>_0x2d6244['toUpperCase']());if(_0x310f61)_0x310f61['innerHTML']='<a\x20href=\x22perfil.html\x22>Hola,\x20'+_0x3386dd+'</a>\x20&nbsp;|&nbsp;\x20<a\x20href=\x22#\x22\x20onclick=\x22logout()\x22>Cerrar\x20sesión</a>';if(_0x4e38a5)_0x4e38a5['innerHTML']=_0x310f61['innerHTML'];}else{if(_0x310f61)_0x310f61['innerHTML']='<a\x20href=\x22login.html\x22>Iniciar\x20sesión</a>\x20|\x20<a\x20href=\x22register.html\x22>Registrarse</a>';if(_0x4e38a5)_0x4e38a5['innerHTML']=_0x310f61['innerHTML'];}}),document['addEventListener']('DOMContentLoaded',()=>{document['getElementById']('c13')['value']='OTROS',bloquearMotorPorVin(),obtenerContador(),obtenerTipoCambioAutomatico(),fetch('header.html')['then'](_0x58682a=>_0x58682a['text']())['then'](_0xec43e0=>{document['getElementById']('header-placeholder')['innerHTML']=_0xec43e0;})['catch'](_0x57f5ee=>console['error']('Error\x20cargando\x20header:',_0x57f5ee)),fetch('footer.html')['then'](_0x29aad8=>_0x29aad8['text']())['then'](_0x2f35a2=>{document['getElementById']('footer-placeholder')['innerHTML']=_0x2f35a2;})['catch'](_0x3d7fff=>console['error']('Error\x20cargando\x20footer:',_0x3d7fff)),auth['onAuthStateChanged'](_0x55ce30=>{const _0x3a138d=document['getElementById']('content');if(_0x55ce30){if(_0x3a138d)_0x3a138d['style']['display']='block';}else alert('❗\x20Debes\x20iniciar\x20sesión\x20para\x20usar\x20la\x20calculadora.'),window['location']['href']='login.html';});});
