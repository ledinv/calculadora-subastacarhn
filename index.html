<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SUBASTACARHN - Calculadora de Importación</title>
  <style>
    /* (TODO: tu CSS permanece exactamente igual) */
    /* Copié solo el HEAD antes, así que mantengo sin cambios */
  </style>
</head>
<body>
  <!-- ... HEADER, NAV, BANNERS, ETC ... -->

  <div class="contenido-central">
    <label for="c1">Monto de Oferta $:</label>
    <input type="number" id="c1" value="0" />
    <label for="c7">Precio de Barco $:</label>
    <input type="number" id="c7" value="0" />
    <label for="c8">Precio de Grua $:</label>
    <input type="number" id="c8" value="0" />
    <label for="e2">Tipo de Cambio:</label>
    <input type="number" id="e2" value="25.90" />
    <label for="c13">VIN:</label>
    <select id="c13">
      <option value="1,4,5">1,4,5</option>
      <option value="OTROS">OTROS</option>
    </select>
    <label for="c14">Tipo de Vehículo:</label>
    <select id="c14" onchange="actualizarMotor()">
      <option value="PICK UP">PICK UP</option>
      <option value="OTROS">OTROS</option>
    </select>
    <label for="motor">Tipo de Motor:</label>
    <select id="motor">
      <option value="1.5 O INFERIOR">1.5 O INFERIOR</option>
      <option value="SUPERIOR A 1.5">SUPERIOR A 1.5</option>
    </select>
    <button id="calculateBtn">Calcular</button>
    <button id="resetBtn">Reiniciar</button>
  </div>

  <!-- ... RESTO DE HTML (banners, resultados, footer) ... -->

<script>
function actualizarMotor() {
  const tipoVehiculo = document.getElementById('c14').value;
  const motorSelect = document.getElementById('motor');
  motorSelect.disabled = tipoVehiculo === "PICK UP";
}

function calcular() {
  registrarClic();

  const c1 = parseFloat(document.getElementById('c1').value);
  const c7 = parseFloat(document.getElementById('c7').value);
  const c8 = parseFloat(document.getElementById('c8').value);
  const e2 = parseFloat(document.getElementById('e2').value);
  const c13 = document.getElementById('c13').value;
  const c14 = document.getElementById('c14').value;
  const tipoMotor = document.getElementById('motor').value;

  const c2 = 15;
  const c3 = buscarVirtualBidFee(c1);
  const c4 = buscarBuyerFee(c1);
  const c5 = 115;
  const c6 = c1 + c2 + c3 + c4 + c5;
  const c9 = c7 + c8;
  const c10 = c6 + c9;
  const c11 = c10 * e2;
  const o3 = 50 * e2;
  const o4 = c6 * 0.015 * e2;

  let c15 = 0;
  if (c13 === "OTROS" && c14 === "PICK UP") {
    c15 = (c11 + o3 + o4 + c5) * 0.10;
  } else if (c14 !== "PICK UP" && tipoMotor === "1.5 O INFERIOR") {
    c15 = (c11 + o3 + o4 + c5) * 0.05;
  } else if (c13 === "OTROS") {
    c15 = (c11 + o3 + o4) * 0.15;
  }

  let isc = 0;
  if (c10 <= 7000) isc = 0.10;
  else if (c10 <= 10000) isc = 0.15;
  else if (c10 <= 20000) isc = 0.20;
  else if (c10 <= 30000) isc = 0.30;
  else isc = 0.45;

  const c16 = (c14 === "OTROS") ? (c11 + o3 + o4 + c15) * isc : 0;
  const c17 = (c11 + c15 + c16 + o3 + o4) * 0.15;
  const c18 = c15 + c16 + c17;
  const c20 = 5000, c21 = 4000, c22 = 7500, c23 = 4000, c24 = 55 * e2;
  const c25 = c20 + c21 + c22 + c23 + c24;
  const c26 = c11 + c18 + c25 + o4 + o3;

  const detalles = [
    ['MONTO DE OFERTA', c1, 'usd'],
    ['ENVIRONMENTAL FEE', c2, 'usd'],
    ['VIRTUAL BID FEE', c3, 'usd'],
    ['BUYER FEE', c4, 'usd'],
    ['GATE Y TITLE PICK FEE', c5, 'usd'],
    ['TOTAL PRECIO SUBASTA', c6, 'usd'],
    ['VALOR DE BARCO', c7, 'usd'],
    ['PRECIO DE GRÚA', c8, 'usd'],
    ['TOTAL DE ENVÍO MARÍTIMO', c9, 'usd'],
    ['TOTAL CIF EN DÓLARES', c10, 'usd'],
    ['TOTAL CIF EN LEMPIRAS', c11, 'hnl'],
    ['DAI', c15, 'hnl'],
    ['ISC', c16, 'hnl'],
    ['ISV', c17, 'hnl'],
    ['TOTAL DE IMPUESTOS HONDURAS', c18, 'hnl'],
    ['ECOTASA', c20, 'hnl'],
    ['ADUANERO', c21, 'hnl'],
    ['VOTAINER - CONSOLIDADOS HN', c22, 'hnl'],
    ['MATRÍCULA Y PLACAS', c23, 'hnl'],
    ['TRANSFERENCIA INTERNACIONAL', c24, 'hnl'],
    ['TOTAL DE GASTOS FIJOS', c25, 'hnl'],
    ['TOTAL FINAL', c26, 'hnl']
  ];

  document.getElementById('results').innerHTML = `
    <p><strong>Total Final:</strong> ${formatear(c26)}</p>
    <button onclick="mostrarDetalles()" id="toggleBtn">Ver detalles</button>
    <div id="detalleResultados" style="display:none;">
      <table>
        <tr><th>Concepto</th><th>Valor</th></tr>
        ${detalles.map(([titulo, valor, tipo]) =>
          `<tr><td>${titulo}</td><td>${tipo === 'usd' ? formatearUSD(valor) : formatear(valor)}</td></tr>`
        ).join('')}
      </table>
    </div>
  `;
}
</script>
</body>
</html>
